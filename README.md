# 1C-DevOps

## Описание

В данном репозитории находятся файлы настроек для создания docker образов и развертывания docker контейнеров приложений, относящихся к разработке на платформах 1С:Предприятие, 1С:Элемент.

Репозиторий содержит:

- Файлы *dockerfile* для создания репозитория.
- Файлы *.arg.tmpl* - как шаблоны файлов для задания аргументов сборки образов.
   > Для кастомизации образов файлы аргументов сборки образов *.arg* помещены в *gitignore*, чтобы они не влияли на репозиторий.
- Файлы *docker-compose.yml* для создания контейнеров с помощью `docker compose`.
- файлы *docker-stack.yml* для создания контейнеров с помощью `docker stack deploy`.
- Файлы *.env.tmpl* - как шаблоны файлов для задания переменны среды.
   > Для кастомизации контейнеров файлы переменных среды *.env* помещены в *gitignore*, чтобы они не влияли на репозиторий.
- Файлы */swarm/\*.tmpl* - как шаблоны файлов конфигураций для **docker swarm**.
   > Файлы шаблонов настроек содержат минимальные настройки для успешного запуска приложения для предварительного знакомства.
- Файлы *\*.sh* - вспомогательные скрипты для настройки инфраструктуры.

Порядок работы с репозиторием:

- Создать образ.
  Для инициализации скрипта создания образа необходимо инициализировать каталог с настройками образа с помощью скрипта docker/init.sh
    - Необходимо задать имя проекта образа
    - Необходимо выбрать приложение для образа
    - После чего создастся скрипт сборки и скрипт переменных в папке user_builds, которая добавлена в *gitignore*
- Развернуть контейнер с минимальными настройками (docker compose, docker stack deploy).
  - **Docker compose**
    - Запуск осуществляется с помощью файла скрипта *compose.sh*.
  - **Docker swarm**
    - Запуск осуществляется с помощью файла скрипта *deploy.sh*.
  - **Portainer**
    - Запуск осуществляется через web-интерфейс платформы для управления контейнерами Portainer.
  > Для запуска приложения необходимо создать файл переменны среды *.env* на основе шаблона *.env.tmpl*.
- Настроить приложения в контейнере помощью пользовательских настроек.

> **Важно**. Репозиторий на текущем этапе развития не претендует на полноту описания. Его развитие будет идти по мере изучения новых механизмов и оптимизации изученных раннее. За любую помощь в дополнении или развития текущих файлов настроек автор репозитория будет очень благодарен.

## Содержание

- Инфраструктура
  - [Portainer](docker/portainer/README.md)
  - [Nginx](docker/nginx/README.md)
- Разработка
  - [Gitlab](docker/gitlab-ce/README.md)
  - [Sonarqube](docker/sonarqube/README.md)
- Моделирование
  - [Diagrams](docker/diagrams/README.md)

(Описание дополняется...)
