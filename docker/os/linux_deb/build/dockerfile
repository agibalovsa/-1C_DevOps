ARG OS_EXT_TAG=debian:bookworm-slim

# hadolint ignore=DL3006
FROM "${OS_EXT_TAG}"

ARG DEBIAN_FRONTEND=noninteractive \
    DEBCONF_NONINTERACTIVE_SEEN=true \
    GOSU_VERSION=1.17

SHELL ["/bin/bash", "-o", "pipefail", "-c"]

# hadolint ignore=SC1091
RUN --mount=from=common_context,target=/common_context \
    --mount=from=context,target=/context \
    set -eux; \
    . context/pre_install; \
    install_packs; \
    . common_context/gosu; \
    install_gosu

ENV LANG=ru_RU.UTF-8 \
    LANGUAGE=ru_RU.UTF-8 \
    LC_ALL=ru_RU.UTF-8